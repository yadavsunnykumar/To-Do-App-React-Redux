{"ast":null,"code":"import axios from 'axios';\nimport { apiCallBegan } from '../api';\nconst api = ({\n  dispatch\n}) => next => async action => {\n  if (action.type !== apiCallBegan.type) return next(action);\n  const {\n    url,\n    method,\n    data,\n    onStart,\n    onSuccess,\n    onError\n  } = action.payload;\n  if (onStart) dispatch({\n    type: onStart\n  });\n  try {\n    const response = await axios.request({\n      baseURL: \"http://localhost:5000/\",\n      url,\n      method,\n      data\n    });\n    dispatch({\n      type: onSuccess,\n      payload: response.data\n    });\n  } catch (error) {\n    dispatch({\n      type: onError,\n      payload: {\n        error: error.message\n      }\n    });\n    dispatch({\n      type: \"SHOW_ERROR\",\n      payload: {\n        error: error.message\n      }\n    });\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","apiCallBegan","api","dispatch","next","action","type","url","method","data","onStart","onSuccess","onError","payload","response","request","baseURL","error","message"],"sources":["/Users/santosh/Desktop/sunny/react-redux/to-do-app/src/store/middleware/api.js"],"sourcesContent":["import axios from 'axios'\nimport { apiCallBegan } from '../api'\n\n\nconst api = ({dispatch})=>next=>async action=>{\n    if(action.type !== apiCallBegan.type) return next(action)\n    const {url,method,data,onStart,onSuccess,onError} = action.payload\n    if(onStart) dispatch({type:onStart})\n    try {\n        const response = await axios.request({\n            baseURL:\"http://localhost:5000/\",\n            url,\n        method,\n        data\n        })\n    \n        dispatch({type:onSuccess,payload:response.data})\n        \n    } catch (error) {\n        dispatch({type:onError,payload:{error:error.message}})\n        dispatch({type:\"SHOW_ERROR\",payload:{error:error.message}})\n        \n    }\n\n    \n}\n\nexport default api"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,QAAQ;AAGrC,MAAMC,GAAG,GAAGA,CAAC;EAACC;AAAQ,CAAC,KAAGC,IAAI,IAAE,MAAMC,MAAM,IAAE;EAC1C,IAAGA,MAAM,CAACC,IAAI,KAAKL,YAAY,CAACK,IAAI,EAAE,OAAOF,IAAI,CAACC,MAAM,CAAC;EACzD,MAAM;IAACE,GAAG;IAACC,MAAM;IAACC,IAAI;IAACC,OAAO;IAACC,SAAS;IAACC;EAAO,CAAC,GAAGP,MAAM,CAACQ,OAAO;EAClE,IAAGH,OAAO,EAAEP,QAAQ,CAAC;IAACG,IAAI,EAACI;EAAO,CAAC,CAAC;EACpC,IAAI;IACA,MAAMI,QAAQ,GAAG,MAAMd,KAAK,CAACe,OAAO,CAAC;MACjCC,OAAO,EAAC,wBAAwB;MAChCT,GAAG;MACPC,MAAM;MACNC;IACA,CAAC,CAAC;IAEFN,QAAQ,CAAC;MAACG,IAAI,EAACK,SAAS;MAACE,OAAO,EAACC,QAAQ,CAACL;IAAI,CAAC,CAAC;EAEpD,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACZd,QAAQ,CAAC;MAACG,IAAI,EAACM,OAAO;MAACC,OAAO,EAAC;QAACI,KAAK,EAACA,KAAK,CAACC;MAAO;IAAC,CAAC,CAAC;IACtDf,QAAQ,CAAC;MAACG,IAAI,EAAC,YAAY;MAACO,OAAO,EAAC;QAACI,KAAK,EAACA,KAAK,CAACC;MAAO;IAAC,CAAC,CAAC;EAE/D;AAGJ,CAAC;AAED,eAAehB,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}